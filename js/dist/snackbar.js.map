{"version":3,"file":"snackbar.js","sources":["../src/snackbar.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Material Style (v3.0.0): snackbar.js\n * Licensed under MIT (https://github.com/materialstyle/materialstyle/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  defineJQueryPlugin\n} from './util/index'\nimport BaseComponent from './base-component'\nimport Manipulator from './dom/manipulator'\nimport {\n  enableDismissTrigger\n} from './util/component-functions'\n\n/**\n * Constants\n */\n\nconst NAME = 'snackbar'\n\nconst SNACKBAR_VISIBLE_DURATION = 3000\nconst SNACKBAR_VISIBLE_DELAY = 200\n\nconst Default = {\n  autoClose: true,\n  visibleDuration: SNACKBAR_VISIBLE_DURATION\n}\n\nconst DefaultType = {\n  autoClose: 'boolean',\n  visibleDuration: 'number'\n}\n\n/**\n * Queue implementation\n */\n\nconst waitingQueue = []\nconst runningQueue = []\nlet activeSnackbar\n\nObject.defineProperty(waitingQueue, 'pushToWaitingQueue', {\n  value(...args) {\n    if (runningQueue.length) {\n      waitingQueue.push(args[0])\n    } else {\n      runningQueue.pushToRunningQueue(args[0])\n    }\n  }\n})\n\nObject.defineProperty(runningQueue, 'pushToRunningQueue', {\n  value(...args) {\n    activeSnackbar = args[0]\n    activeSnackbar.classList.add('show')\n    runningQueue.push(activeSnackbar)\n\n    if (activeSnackbar.dataset.bsAutoClose === 'true') {\n      setTimeout(() => {\n        activeSnackbar.classList.remove('show')\n        runningQueue.removeFromRunningQueue(activeSnackbar)\n      }, activeSnackbar.dataset.bsVisibleDuration)\n    }\n  }\n})\n\nObject.defineProperty(runningQueue, 'removeFromRunningQueue', {\n  value() {\n    if (waitingQueue.length) {\n      setTimeout(() => {\n        runningQueue.shift()\n        runningQueue.pushToRunningQueue(waitingQueue.shift())\n      }, SNACKBAR_VISIBLE_DELAY)\n    } else {\n      runningQueue.shift()\n    }\n  }\n})\n\n/**\n * Class definition\n */\n\nclass Snackbar extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n\n    this._config = this._getConfig(config)\n    this._element.dataset.bsVisibleDuration = this._config.visibleDuration\n    this._element.dataset.bsAutoClose = this._config.autoClose\n\n    waitingQueue.pushToWaitingQueue(this._element)\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      Snackbar.getOrCreateInstance(this, config)\n    })\n  }\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...typeof config === 'object' ? config : {}\n    }\n    config = this._mergeConfigObj(config)\n    config = this._configAfterMerge(config)\n\n    this._typeCheckConfig(config)\n\n    return config\n  }\n\n  close() {\n    activeSnackbar.classList.remove('show')\n    runningQueue.removeFromRunningQueue(activeSnackbar)\n  }\n}\n\n/**\n * Data API implementation\n */\n\nenableDismissTrigger(Snackbar, 'close')\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Snackbar)\n\nexport default Snackbar\n"],"names":["NAME","SNACKBAR_VISIBLE_DURATION","SNACKBAR_VISIBLE_DELAY","Default","autoClose","visibleDuration","DefaultType","waitingQueue","runningQueue","activeSnackbar","Object","defineProperty","value","args","length","push","pushToRunningQueue","classList","add","dataset","bsAutoClose","setTimeout","remove","removeFromRunningQueue","bsVisibleDuration","shift","Snackbar","BaseComponent","constructor","element","config","_config","_getConfig","_element","pushToWaitingQueue","jQueryInterface","each","getOrCreateInstance","Manipulator","getDataAttributes","_mergeConfigObj","_configAfterMerge","_typeCheckConfig","close","enableDismissTrigger","defineJQueryPlugin"],"mappings":"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"}