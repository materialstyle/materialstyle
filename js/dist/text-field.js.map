{"version":3,"file":"text-field.js","sources":["../src/text-field.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Material Style (v3.0.0): text_field.js\n * Licensed under MIT (https://github.com/materialstyle/materialstyle/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  getBaseColor, getPrimaryColor\n} from './util/color'\nimport BaseComponent from './base-component'\nimport {\n  defineJQueryPlugin\n} from './util/index'\n\n/**\n * --------------------------------------------------------------------------\n * Constants\n * --------------------------------------------------------------------------\n */\n\nconst NAME = 'textfield'\nconst VERSION = '3.0.0'\n\nconst CLASS_NAME_FLOATING = 'form-floating'\nconst CLASS_NAME_FLOATING_OUTLINED = 'form-floating-outlined'\n\nconst LABEL_SCALE = 0.85\n\nclass TextField extends BaseComponent {\n  constructor(element) {\n    super(element)\n    this._textField = element\n    this._formFloating = element.closest(`.${CLASS_NAME_FLOATING}`)\n\n    if (this._textField && this._formFloating) {\n      this.initTextFields()\n      this.addFontsReadyEvent()\n    }\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = TextField.getOrCreateInstance(this)\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config](this)\n      }\n    })\n  }\n\n  initTextFields() {\n    this._formFloating.style.setProperty('--form-field-base-color', getBaseColor(this._formFloating))\n    this._formFloating.style.setProperty('--form-field-primary-color', getPrimaryColor(this._formFloating))\n\n    this._label = this._formFloating.querySelector('label')\n    this._inputGroup = this._formFloating.closest('.input-group')\n\n    if (this._inputGroup) {\n      if (this._formFloating.className.includes(CLASS_NAME_FLOATING_OUTLINED)) {\n        this._inputGroup.classList.add('has-form-floating-outlined')\n      } else {\n        this._inputGroup.classList.add('has-form-floating')\n      }\n    }\n\n    this._formFloatingWithIcon = this._formFloating.closest('.form-floating-with-icon')\n\n    if (this._formFloatingWithIcon) {\n      this._prepend = this._formFloatingWithIcon.querySelector('.prepend')\n      this._append = this._formFloatingWithIcon.querySelector('.append')\n    }\n\n    if (this._prepend) {\n      this._label.style.paddingLeft = 0\n    }\n\n    if (this._formFloating.className.includes(CLASS_NAME_FLOATING_OUTLINED)) {\n      this.addNotch()\n    } else {\n      this.addRipple()\n    }\n  }\n\n  redraw() {\n    if (this._label) {\n      this._formFloating.style.setProperty('--label-floating-margin-right', `-${this._label.offsetWidth - (this._label.offsetWidth * LABEL_SCALE)}px`)\n    }\n\n    this.addFontsReadyEvent()\n  }\n\n  addRipple() {\n    const ripple = document.createElement('div')\n    ripple.className = 'm-line-ripple'\n\n    this._ripple = ripple\n    this._textField.after(ripple)\n  }\n\n  addNotch() {\n    const notch = document.createElement('div')\n    notch.className = 'm-notch'\n\n    const notchBefore = document.createElement('div')\n    notchBefore.className = 'm-notch-before'\n\n    const notchBetween = document.createElement('div')\n    notchBetween.className = 'm-notch-between'\n\n    const notchAfter = document.createElement('div')\n    notchAfter.className = 'm-notch-after'\n\n    notch.append(notchBefore)\n    notch.append(notchBetween)\n    notch.append(notchAfter)\n\n    this._textField.after(notch)\n    this._notch = notch\n\n    if (this._label) {\n      notchBetween.append(this._label)\n      this._formFloating.style.setProperty('--label-floating-margin-right', `-${this._label.offsetWidth - (this._label.offsetWidth * LABEL_SCALE)}px`)\n    }\n  }\n\n  addFontsReadyEvent() {\n    document.fonts.ready.then(() => {\n      if (this._formFloatingWithIcon) {\n        if (this._prepend) {\n          this._prepend.style.height = `${this._textField.offsetHeight}px`\n          this._formFloating.style.setProperty('--prepend-width', `${this._prepend.offsetWidth}px`)\n        }\n\n        if (this._append) {\n          this._append.style.height = `${this._textField.offsetHeight}px`\n          this._formFloating.style.setProperty('--append-width', `${this._append.offsetWidth}px`)\n        }\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\ndefineJQueryPlugin(TextField)\n\nexport default TextField\n"],"names":["NAME","VERSION","CLASS_NAME_FLOATING","CLASS_NAME_FLOATING_OUTLINED","LABEL_SCALE","TextField","BaseComponent","constructor","element","_textField","_formFloating","closest","initTextFields","addFontsReadyEvent","jQueryInterface","config","each","data","getOrCreateInstance","TypeError","style","setProperty","getBaseColor","getPrimaryColor","_label","querySelector","_inputGroup","className","includes","classList","add","_formFloatingWithIcon","_prepend","_append","paddingLeft","addNotch","addRipple","redraw","offsetWidth","ripple","document","createElement","_ripple","after","notch","notchBefore","notchBetween","notchAfter","append","_notch","fonts","ready","then","height","offsetHeight","defineJQueryPlugin"],"mappings":"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"}