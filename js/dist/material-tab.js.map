{"version":3,"file":"material-tab.js","sources":["../src/material-tab.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Material Style (v3.0.0): material-tab.js\n * Licensed under MIT (https://github.com/materialstyle/materialstyle/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Tab from './tab'\nimport EventHandler from './dom/event-handler'\nimport {\n  defineJQueryPlugin\n} from './util/index'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'materialtab'\nconst VERSION = '3.0.0'\n\nconst ENTER_KEY_CODE = 13\nconst SPACE_KEY_CODE = 32\nconst INDICATOR_HEIGHT = 2\n\nclass MaterialTab extends Tab {\n  constructor(element) {\n    super(element)\n    this._element = element\n    this.initTab()\n    this._setListeners()\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = MaterialTab.getOrCreateInstance(this)\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n      }\n    })\n  }\n\n  initTab() {\n    let indicatorLeft = 0\n    let indicatorTop = 0\n    let indicatorWidth = 0\n\n    let activeItem = this._element.querySelector('.nav-link.active')\n\n    activeItem = activeItem === null ? this._element.querySelector('.nav-item') : activeItem.closest('.nav-item')\n\n    if (activeItem !== null) {\n      indicatorLeft = `${activeItem.offsetLeft}px`\n      indicatorTop = `${activeItem.offsetTop + activeItem.offsetHeight - INDICATOR_HEIGHT}px`\n      indicatorWidth = `${activeItem.offsetWidth}px`\n    }\n\n    const activeIndicator = document.createElement('span')\n    activeIndicator.className = 'active-indicator'\n    activeIndicator.style.left = indicatorLeft\n    activeIndicator.style.top = indicatorTop\n    activeIndicator.style.width = indicatorWidth\n\n    this._activeIndicator = activeIndicator\n\n    this._element.append(activeIndicator)\n\n    this._element.style.visibility = 'visible'\n  }\n\n  redraw() {\n    this.setIndicatorPositionOnResize()\n  }\n\n  setIndicatorPosition(target) {\n    this._activeIndicator.style.left = `${target.offsetLeft}px`\n    this._activeIndicator.style.top = `${target.offsetTop + target.offsetHeight - INDICATOR_HEIGHT}px`\n    this._activeIndicator.style.width = `${target.offsetWidth}px`\n  }\n\n  setIndicatorPositionOnResize() {\n    let indicatorLeft = 0\n    let indicatorTop = 0\n    let indicatorWidth = 0\n\n    let activeItem = this._element.querySelector('.nav-link.active')\n\n    activeItem = activeItem === null ? this._element.querySelector('.nav-item') : activeItem.closest('.nav-item')\n\n    if (activeItem !== null) {\n      indicatorLeft = `${activeItem.offsetLeft}px`\n      indicatorTop = `${activeItem.offsetTop + activeItem.offsetHeight - INDICATOR_HEIGHT}px`\n      indicatorWidth = `${activeItem.offsetWidth}px`\n    }\n\n    this._activeIndicator.style.left = indicatorLeft\n    this._activeIndicator.style.top = indicatorTop\n    this._activeIndicator.style.width = indicatorWidth\n  }\n\n  _setListeners() {\n    const navItems = this._element.querySelectorAll('.nav-item')\n\n    for (const [, value] of Object.entries(navItems)) {\n      EventHandler.on(value, 'mouseup', () => {\n        this.setIndicatorPosition(value)\n      })\n\n      EventHandler.on(value, 'keyup', event => {\n        if (event.code === 'Enter' || event.keyCode === ENTER_KEY_CODE ||\n          event.code === 'Space' || event.keyCode === SPACE_KEY_CODE\n        ) {\n          this.setIndicatorPosition(value)\n        }\n      })\n    }\n\n    EventHandler.on(window, 'resize', () => this.setIndicatorPositionOnResize())\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\ndefineJQueryPlugin(MaterialTab)\n\nexport default MaterialTab\n"],"names":["NAME","VERSION","ENTER_KEY_CODE","SPACE_KEY_CODE","INDICATOR_HEIGHT","MaterialTab","Tab","constructor","element","_element","initTab","_setListeners","jQueryInterface","config","each","data","getOrCreateInstance","TypeError","indicatorLeft","indicatorTop","indicatorWidth","activeItem","querySelector","closest","offsetLeft","offsetTop","offsetHeight","offsetWidth","activeIndicator","document","createElement","className","style","left","top","width","_activeIndicator","append","visibility","redraw","setIndicatorPositionOnResize","setIndicatorPosition","target","navItems","querySelectorAll","value","Object","entries","EventHandler","on","event","code","keyCode","window","defineJQueryPlugin"],"mappings":"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"}