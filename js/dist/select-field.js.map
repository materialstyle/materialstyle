{"version":3,"file":"select-field.js","sources":["../src/select-field.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Material Style (v3.0.0): select_field.js\n * Licensed under MIT (https://github.com/materialstyle/materialstyle/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  getBaseColor, getPrimaryColor\n} from './util/color'\nimport BaseComponent from './base-component'\nimport EventHandler from './dom/event-handler'\nimport Dropdown from './dropdown'\nimport {\n  defineJQueryPlugin\n} from './util/index'\n\n/**\n * --------------------------------------------------------------------------\n * Constants\n * --------------------------------------------------------------------------\n */\n\nconst NAME = 'selectfield'\nconst VERSION = '3.0.0'\nconst DATA_KEY = 'bs.selectfield'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_FOCUS = `focus${EVENT_KEY}`\nconst EVENT_FOCUSOUT = `focusout${EVENT_KEY}`\nconst EVENT_CLICK = `click${EVENT_KEY}`\nconst EVENT_KEYUP = `keyup${EVENT_KEY}`\n\nconst EVENT_HIDDEN = 'hidden.bs.dropdown'\nconst EVENT_SHOWN = 'shown.bs.dropdown'\n\nconst CLASS_NAME_FLOATING = 'form-floating'\nconst CLASS_NAME_FLOATING_OUTLINED = 'form-floating-outlined'\n\nconst CLASS_NAME_SEARCHABLE = 'searchable'\nconst CLASS_NAME_MULTI_SELECT = 'multi-select'\n\nconst SELECTOR_DROPDOWN_ITEM = '.dropdown-item:not(.select-all):not(.btn-close)'\nconst SELECTOR_SELECT_ALL = '.select-all'\n\nconst LABEL_SCALE = 0.85\n\nclass SelectField extends BaseComponent {\n  constructor(element) {\n    super(element)\n    this._select = element\n    this._formFloating = element.closest(`.${CLASS_NAME_FLOATING}`)\n\n    if (this._select && this._formFloating) {\n      this.initSelect()\n      this._setListeners()\n    }\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = SelectField.getOrCreateInstance(this)\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n      }\n    })\n  }\n\n  initSelect() {\n    this._select.tabIndex = -1\n\n    this._isSearchable = Boolean(this._formFloating.className.includes(CLASS_NAME_SEARCHABLE))\n    this._multiSelectEnabled = Boolean(this._formFloating.className.includes(CLASS_NAME_MULTI_SELECT))\n\n    this._formFloating.style.setProperty('--form-field-base-color', getBaseColor(this._formFloating))\n    this._formFloating.style.setProperty('--form-field-primary-color', getPrimaryColor(this._formFloating))\n\n    this._label = this._formFloating.querySelector('label')\n    this._inputGroup = this._formFloating.closest('.input-group')\n\n    if (this._inputGroup) {\n      if (this._formFloating.className.includes(CLASS_NAME_FLOATING_OUTLINED)) {\n        this._inputGroup.classList.add('has-form-floating-outlined')\n      } else {\n        this._inputGroup.classList.add('has-form-floating')\n      }\n    }\n\n    this._formFloatingWithIcon = this._formFloating.closest('.form-floating-with-icon')\n\n    if (this._formFloatingWithIcon) {\n      this._prepend = this._formFloatingWithIcon.querySelector('.prepend')\n      this._append = this._formFloatingWithIcon.querySelector('.append')\n    }\n\n    if (this._prepend) {\n      this._label.style.paddingLeft = 0\n    }\n\n    this.createDropdownMenu()\n    this.createDropdown()\n    this.showSelectedItems()\n\n    if (this._formFloating.className.includes(CLASS_NAME_FLOATING_OUTLINED)) {\n      this.addNotch()\n    } else {\n      this.addRipple()\n    }\n\n    if (this._label) {\n      this.toggleLabelState()\n    }\n  }\n\n  redraw() {\n    if (this._label) {\n      this.toggleLabelState()\n      this._formFloating.style.setProperty('--label-floating-margin-right', `-${this._label.offsetWidth - (this._label.offsetWidth * LABEL_SCALE)}px`)\n    }\n\n    this.addFontsReadyEvent()\n  }\n\n  rebuild() {\n    this._options = []\n    this._dropdownMenu.innerHTML = ''\n\n    this.createDropdownMenu()\n    this.showSelectedItems()\n    this.redraw()\n    this._setListeners()\n  }\n\n  createDropdownMenu() {\n    let dropdownMenu = this._dropdownMenu\n\n    if (dropdownMenu === undefined) {\n      dropdownMenu = document.createElement('div')\n      dropdownMenu.className = 'dropdown-menu'\n    }\n\n    if (this._isSearchable) {\n      dropdownMenu.append(this.createSearchContainer())\n    }\n\n    if (this._multiSelectEnabled) {\n      dropdownMenu.append(this.createDropdownItems('Select All', '', false, true))\n    }\n\n    const optionsArray = []\n    const options = this._select.querySelectorAll('option')\n\n    for (const [, value] of Object.entries(options)) {\n      dropdownMenu.append(this.createDropdownItems(value.text, value.value, value.selected))\n      optionsArray.push({\n        value: value.value,\n        text: value.innerHTML,\n        selected: value.selected\n      })\n    }\n\n    this._options = optionsArray\n\n    if (this._multiSelectEnabled) {\n      const closeButton = document.createElement('button')\n      closeButton.type = 'button'\n      closeButton.className = 'btn-close dropdown-item w-100'\n      closeButton.ariaLabel = 'Close'\n\n      this._closeButton = closeButton\n      dropdownMenu.append(closeButton)\n    }\n\n    this._dropdownMenu = dropdownMenu\n  }\n\n  createDropdown() {\n    const dropdown = document.createElement('div')\n    dropdown.className = 'dropdown'\n\n    const selectedItem = document.createElement('button')\n    selectedItem.type = 'button'\n    selectedItem.className = 'btn btn-select dropdown-toggle text-start shadow-none'\n    selectedItem.dataset.bsToggle = 'dropdown'\n    selectedItem.dataset.bsAutoClose = 'outside'\n\n    if (this._select.disabled) {\n      selectedItem.disabled = true\n    }\n\n    dropdown.append(selectedItem)\n    dropdown.append(this._dropdownMenu)\n\n    this._dropdown = dropdown\n    this._selectedItem = selectedItem\n\n    this._select.after(this._dropdown)\n\n    this._dropdownInstance = Dropdown.getOrCreateInstance(this._selectedItem)\n  }\n\n  createSearchContainer() {\n    const searchInput = document.createElement('input')\n    searchInput.type = 'search'\n    searchInput.placeholder = 'Search'\n    searchInput.className = 'search-input'\n    searchInput.autocomplete = 'off'\n\n    return searchInput\n  }\n\n  createDropdownItems(text, value, checked, isSelectAllButton = false) {\n    const dropdownItem = document.createElement('button')\n    dropdownItem.type = 'button'\n    dropdownItem.className = 'dropdown-item d-flex align-items-center'\n    dropdownItem.dataset.bsValue = value\n    dropdownItem.dataset.bsChecked = false\n\n    if (isSelectAllButton) {\n      dropdownItem.classList.add('select-all')\n    }\n\n    if (this._multiSelectEnabled) {\n      const checkmark = document.createElement('span')\n      checkmark.className = 'checkmark me-1'\n\n      const label = document.createElement('span')\n      label.className = 'dropdown-text'\n      label.innerHTML = text\n\n      dropdownItem.append(checkmark)\n      dropdownItem.append(label)\n    } else {\n      dropdownItem.innerHTML = text\n      if (checked) {\n        dropdownItem.classList.add('checked')\n        dropdownItem.dataset.bsChecked = true\n      }\n    }\n\n    return dropdownItem\n  }\n\n  showSelectedItems() {\n    if (this._multiSelectEnabled) {\n      this._selectedItem.innerHTML = this._options.map(option => {\n        if (option.selected) {\n          return `<span class=\"badge bg-dark d-inline-flex align-items-center p-1 m-1\">${option.text}<button type=\"button\" class=\"btn-close btn-close-white ms-1\" aria-hidden=\"true\" data-bs-value=\"${option.value}\"></button></span>`\n        }\n\n        return ''\n      }).join('')\n\n      const closeButton = this._selectedItem.querySelectorAll('.btn-close')\n\n      for (const [, value] of Object.entries(closeButton)) {\n        EventHandler.on(value, EVENT_CLICK, event => {\n          this._dropdownInstance.show()\n          this.selectOne(event.target.dataset.bsValue, false)\n        })\n      }\n    } else {\n      this._selectedItem.innerHTML = this._options.map(option => {\n        if (option.selected) {\n          return option.text\n        }\n\n        return ''\n      }).join('')\n    }\n  }\n\n  addRipple() {\n    const ripple = document.createElement('div')\n    ripple.className = 'm-line-ripple'\n\n    this._ripple = ripple\n    this._dropdown.after(ripple)\n  }\n\n  addNotch() {\n    const notch = document.createElement('div')\n    notch.className = 'm-notch'\n\n    const notchBefore = document.createElement('div')\n    notchBefore.className = 'm-notch-before'\n\n    const notchBetween = document.createElement('div')\n    notchBetween.className = 'm-notch-between'\n\n    const notchAfter = document.createElement('div')\n    notchAfter.className = 'm-notch-after'\n\n    notch.append(notchBefore)\n    notch.append(notchBetween)\n    notch.append(notchAfter)\n\n    this._dropdown.after(notch)\n    this._notch = notch\n\n    if (this._label) {\n      notchBetween.append(this._label)\n      this._formFloating.style.setProperty('--label-floating-margin-right', `-${this._label.offsetWidth - (this._label.offsetWidth * LABEL_SCALE)}px`)\n    }\n  }\n\n  toggleLabelState() {\n    if (this._selectedItem.innerHTML.length) {\n      this._dropdown.classList.add('float')\n    } else {\n      this._dropdown.classList.remove('float')\n    }\n  }\n\n  handleFocusOut() {\n    if (!this._selectedItem.classList.contains('show')) {\n      this.toggleLabelState()\n    }\n  }\n\n  selectOne(value, checked) {\n    if (!this._multiSelectEnabled) {\n      const selectedOptions = this._select.querySelectorAll('option')\n      for (const selectedOption of selectedOptions) {\n        if (selectedOption.selected) {\n          selectedOption.selected = false\n        }\n      }\n    }\n\n    this._select.querySelector(`option[value=\"${value}\"]`).selected = checked\n\n    this._select.dispatchEvent(new Event('change', {\n      bubbles: true\n    }))\n  }\n\n  selectAll(checked) {\n    const options = this._select.querySelectorAll('option')\n\n    for (const option of options) {\n      option.selected = checked\n    }\n\n    this._select.dispatchEvent(new Event('change', {\n      bubbles: true\n    }))\n  }\n\n  setSelectValue(value, checked) {\n    let index\n\n    if (!this._multiSelectEnabled) {\n      const dropdownItems = this._dropdown.querySelectorAll(SELECTOR_DROPDOWN_ITEM)\n      for (const dropdownItem of dropdownItems) {\n        dropdownItem.dataset.bsChecked = false\n        dropdownItem.classList.remove('checked')\n      }\n\n      index = this._options.findIndex(o => o.selected === true)\n      if (index !== -1) {\n        this._options[index].selected = false\n      }\n    }\n\n    this._dropdown.querySelector(`.dropdown-item[data-bs-value=\"${value}\"]`).dataset.bsChecked = checked\n\n    if (checked) {\n      this._dropdown.querySelector(`.dropdown-item[data-bs-value=\"${value}\"]`).classList.add('checked')\n    } else {\n      this._dropdown.querySelector(`.dropdown-item[data-bs-value=\"${value}\"]`).classList.remove('checked')\n    }\n\n    index = this._options.findIndex(o => o.value === value)\n    this._options[index].selected = checked\n\n    this.showSelectedItems()\n  }\n\n  search(value) {\n    value = value.toLowerCase()\n\n    const dropdownItems = this._dropdown.querySelectorAll(SELECTOR_DROPDOWN_ITEM)\n\n    for (const [, item] of Object.entries(dropdownItems)) {\n      let optionText = ''\n\n      optionText = this._multiSelectEnabled ? item.querySelector('.dropdown-text').innerHTML : item.innerHTML\n\n      if (!optionText.toLowerCase().includes(value)) {\n        item.classList.add('d-none')\n        item.classList.remove('d-flex')\n      } else {\n        item.classList.add('d-flex')\n        item.classList.remove('d-none')\n      }\n    }\n  }\n\n  _setListeners() {\n    EventHandler.on(this._selectedItem, EVENT_FOCUS, () => this._dropdown.classList.add('float'))\n    EventHandler.on(this._selectedItem, EVENT_FOCUSOUT, () => this.handleFocusOut())\n    EventHandler.on(this._dropdown, EVENT_SHOWN, () => this._dropdown.classList.add('float'))\n    EventHandler.on(this._dropdown, EVENT_HIDDEN, () => this.handleFocusOut())\n\n    EventHandler.on(this._dropdown.querySelector(SELECTOR_SELECT_ALL), EVENT_CLICK, event => {\n      const checked = event.target.dataset.bsChecked !== 'true'\n      event.target.dataset.bsChecked = checked\n\n      if (checked) {\n        event.target.classList.add('checked')\n      } else {\n        event.target.classList.remove('checked')\n      }\n\n      this.selectAll(checked)\n    })\n\n    EventHandler.on(this._dropdown.querySelector('.search-input'), EVENT_KEYUP, event => {\n      this.search(event.target.value)\n    })\n\n    EventHandler.on(this._dropdown.querySelector('.search-input'), 'search', event => {\n      this.search(event.target.value)\n    })\n\n    const dropdownItems = this._dropdown.querySelectorAll(SELECTOR_DROPDOWN_ITEM)\n\n    for (const [, value] of Object.entries(dropdownItems)) {\n      EventHandler.on(value, EVENT_CLICK, event => {\n        if (this._multiSelectEnabled) {\n          this.selectOne(event.target.dataset.bsValue, event.target.dataset.bsChecked !== 'true')\n        } else {\n          this.selectOne(event.target.dataset.bsValue, true)\n\n          this._dropdownInstance.toggle()\n        }\n      })\n    }\n\n    if (this._closeButton !== undefined) {\n      EventHandler.on(this._closeButton, EVENT_CLICK, () => {\n        this._dropdownInstance.toggle()\n      })\n    }\n\n    EventHandler.on(this._select, 'change', event => {\n      if (this._multiSelectEnabled) {\n        const selectValue = new Set([...event.target.options].filter(option => option.selected).map(option => option.value))\n        let allSelected = true\n\n        for (const [, value] of Object.entries(this._options)) {\n          if (selectValue.has(value.value)) {\n            this.setSelectValue(value.value, true)\n          } else {\n            this.setSelectValue(value.value, false)\n            allSelected = false\n          }\n        }\n\n        const selectAllButton = this._dropdown.querySelector(SELECTOR_SELECT_ALL)\n        if (allSelected) {\n          selectAllButton.classList.add('checked')\n          selectAllButton.dataset.bsChecked = true\n        } else {\n          selectAllButton.classList.remove('checked')\n          selectAllButton.dataset.bsChecked = false\n        }\n      } else {\n        this.setSelectValue(event.target.value, true)\n      }\n\n      this.handleFocusOut()\n    })\n\n    this.addFontsReadyEvent()\n  }\n\n  addFontsReadyEvent() {\n    document.fonts.ready.then(() => {\n      if (this._formFloatingWithIcon) {\n        if (this._prepend) {\n          this._prepend.style.height = `${this._selectedItem.offsetHeight}px`\n          this._formFloating.style.setProperty('--prepend-width', `${this._prepend.offsetWidth}px`)\n        }\n\n        if (this._append) {\n          this._append.style.height = `${this._selectedItem.offsetHeight}px`\n          this._formFloating.style.setProperty('--append-width', `${this._append.offsetWidth}px`)\n        }\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\ndefineJQueryPlugin(SelectField)\n\nexport default SelectField\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","EVENT_FOCUS","EVENT_FOCUSOUT","EVENT_CLICK","EVENT_KEYUP","EVENT_HIDDEN","EVENT_SHOWN","CLASS_NAME_FLOATING","CLASS_NAME_FLOATING_OUTLINED","CLASS_NAME_SEARCHABLE","CLASS_NAME_MULTI_SELECT","SELECTOR_DROPDOWN_ITEM","SELECTOR_SELECT_ALL","LABEL_SCALE","SelectField","BaseComponent","constructor","element","_select","_formFloating","closest","initSelect","_setListeners","jQueryInterface","config","each","data","getOrCreateInstance","TypeError","tabIndex","_isSearchable","Boolean","className","includes","_multiSelectEnabled","style","setProperty","getBaseColor","getPrimaryColor","_label","querySelector","_inputGroup","classList","add","_formFloatingWithIcon","_prepend","_append","paddingLeft","createDropdownMenu","createDropdown","showSelectedItems","addNotch","addRipple","toggleLabelState","redraw","offsetWidth","addFontsReadyEvent","rebuild","_options","_dropdownMenu","innerHTML","dropdownMenu","undefined","document","createElement","append","createSearchContainer","createDropdownItems","optionsArray","options","querySelectorAll","value","Object","entries","text","selected","push","closeButton","type","ariaLabel","_closeButton","dropdown","selectedItem","dataset","bsToggle","bsAutoClose","disabled","_dropdown","_selectedItem","after","_dropdownInstance","Dropdown","searchInput","placeholder","autocomplete","checked","isSelectAllButton","dropdownItem","bsValue","bsChecked","checkmark","label","map","option","join","EventHandler","on","event","show","selectOne","target","ripple","_ripple","notch","notchBefore","notchBetween","notchAfter","_notch","length","remove","handleFocusOut","contains","selectedOptions","selectedOption","dispatchEvent","Event","bubbles","selectAll","setSelectValue","index","dropdownItems","findIndex","o","search","toLowerCase","item","optionText","toggle","selectValue","Set","filter","allSelected","has","selectAllButton","fonts","ready","then","height","offsetHeight","defineJQueryPlugin"],"mappings":"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"}